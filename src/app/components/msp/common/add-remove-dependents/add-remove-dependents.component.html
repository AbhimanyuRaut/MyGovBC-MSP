<button type="button" class="btn btn-default btn-xs pull-right" (click)="cancelDependentRemoval()" [innerHTML]="lang('./en/index.js').clearButton[person.relationship]">
</button>

<h2 [innerHTML]="lang('./en/index.js').sectionTitle[person.relationship]"></h2>
<p [innerHTML]="lang('./en/index.js').sectionBody[person.relationship]"></p>
<label [innerHtml]="lang('./en/index.js').isExistingBeneficiaryQuestion[person.relationship]"></label>
<msp-toggle [(data)]="person.isExistingBeneficiary"></msp-toggle>

<!-- We only want this section to show if value is true or false, but NOT truthy
or falsy.  It only appears once the user has selected either option in the
toggle. -->
<ng-container *ngIf="person.isExistingBeneficiary===true || person.isExistingBeneficiary===false">

  <msp-status-in-canada-radio 
    *ngIf="person.isExistingBeneficiary===false" 
    [person]='person'>
  </msp-status-in-canada-radio>  

  <!-- msp-status-in-canada-radio is visible, user must make a selection first before displaying this section. -->
  <ng-container *ngIf="
    person.isExistingBeneficiary!==false || 
    (person.status || person.status === 0)"> <!-- dependent form container -->

    <!-- todo - need to hide the trailing <hr> in msp-account-person-details but only for here, not affect other layouts. -->
    <msp-account-personal-details [person]='person' [id]='person.id' (onChange)="change($event)" embedded=true></msp-account-personal-details>
  
    <!-- Spouse-only Section, marriage date etc. -->
    <ng-container *ngIf="person.relationship === Relationship.Spouse">
      <div class="row">
        <div class="col-md-4">
          <label for='addSpousePreviousLastName' [innerHTML]="lang('./en/index.js').previousName"></label>
          <input type="text" name="spousePrevLastname" class="form-control" id='addSpousePreviousLastName' [(ngModel)]="person.prevLastName">
        </div>
        <div class="col-md-4">
          <msp-date
            [label]="lang('./en/index.js').marriageDate"
            [showError]='showError'
            [(date)]="person.marriageDate"
          ></msp-date>
        </div>
      </div>
    </ng-container> <!-- End Spouse-only Section -->

         
    <!-- Dependent is CitizenAdult -->
    <!-- TODO - Extract all 'status' fields to component? <msp-dependents-new-beneficiary>? -->
    <ng-container *ngIf="person.status === StatusInCanada.CitizenAdult">
      <div class='question-row'>
        <div class="form-group">
          <label [innerHtml]="lang('./en/index.js').livedInBCSinceBirth[person.relationship]"></label>
          <msp-toggle [(data)]="person.livedInBCSinceBirth"></msp-toggle>
        </div>


        <div class="row form-group" *ngIf="person.livedInBCSinceBirth === false">
          <div class="col-md-3">
              <msp-date
              [label]="lang('./en/index.js').moveDateToBC"
              [showError]='showError'
              [(date)]="person.arrivalToBCSimple">
            </msp-date>
          </div>
          <div class="col-md-4">
            <label for="movedFromProvinceOrCountry" [innerHtml]="lang('./en/index.js').movedFromProvinceOrCountry"></label>
            <input type="text" class='form-control' name="movedFromProvinceOrCountry" [(ngModel)]=person.movedFromProvinceOrCountry>
          </div>
          <div class="col-md-4">
              <label for="healthNumberFromOtherProvince" [innerHtml]="lang('./en/index.js').medicalPlanPreviousResidence"></label>
              <input type="text" class='form-control' name="healthNumberFromOtherProvince" [(ngModel)]=person.healthNumberFromOtherProvince>
            </div>
        </div>

      </div>

      <div class='question-row' *ngIf="person.relationship === Relationship.ChildUnder19 || person.relationship === Relationship.Child19To24">
          <label [innerHtml]="lang('./en/index.js').newlyAdopted"></label>
          <msp-toggle [(data)]="person.newlyAdopted"></msp-toggle>
      </div>

      <div class='question-row'>
          <label [innerHtml]="lang('./en/index.js').hasBeenOutsideBC30InYear"></label>
          <msp-toggle [(data)]="person.declarationForOutsideOver30Days"></msp-toggle>
      </div>
      <div class='question-row'>
          <label [innerHtml]="lang('./en/index.js').willBeOutsideBC30InYear"></label>
          <msp-toggle [(data)]="person.plannedAbsence"></msp-toggle>
      </div>
      <div class='question-row'>
          <label [innerHtml]="lang('./en/index.js').releasedFromArmedForcesOrInstitution"></label>
          <msp-toggle [(data)]="showHasBeenReleasedFromArmedForces"></msp-toggle>
      </div>

      <div class='row' *ngIf="showHasBeenReleasedFromArmedForces">
          <div class="col-md-3">
            <msp-discharge-date
              [year]="person.dischargeYear"
              (yearChange)="person.dischargeYear = $event"
              [month]="person.dischargeMonth"
              (monthChange)="person.dischargeMonth = $event"
              [day]="person.dischargeDay"
              (dayChange)="person.dischargeDay = $event"
              (onChange) = "onChange.emit($event)" 
              [showError]="showError"
            ></msp-discharge-date>
          </div>

          <div class="col-md-5">
            <label [innerHtml]="lang('./en/index.js').instituteName"></label>     
            <input type="text" class='form-control' name="nameOfInstitute" [(ngModel)]=person.nameOfInstitute>
          </div>
      </div>

    </ng-container>
    <!-- End Dependent is Citizen Section -->

    <!-- TODO Add fields based on peron's status!
      fields must be i18n based on relationship, e.g.: 
          ['Has your spouse lived in B.C. since birth?',
          'Has your child lived in B.C. since birth?']
    -->
  
  </ng-container> <!-- end dependent form container -->

</ng-container>



<hr class='strong-hr'>